<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>HelpOnPackageInstaller</title>
<link rel="stylesheet" type="text/css" media="all" charset="utf-8" href="mentalwealth/css/common.css">
<link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="mentalwealth/css/screen.css">
<link rel="stylesheet" type="text/css" media="print" charset="utf-8" href="mentalwealth/css/print.css">
</head>
<body>
<table>
<tr>
<td>
<img src="logo.png">
</td>
<td>
&nbsp;[<a href="FrontPage.html">FrontPage</a>]&nbsp;[<a href="TitleIndex.html">TitleIndex</a>]&nbsp;[<a href="WordIndex.html">WordIndex</a>]
</td>
</tr>
</table>
<hr>
<div id="page">
<h1 id="title">HelpOnPackageInstaller</h1>
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-6"></span><p class="line867">
<h1 id="head-d2ee42d91ab9b1af8950012eac8a58fec86c1acf">1. Introduction</h1>
<span class="anchor" id="line-7"></span><p class="line874">Have you ever wondered why we have so many pages in the main distribution? Mostly because we do not have a format to deliver the help pages in one file. Or why installing a theme is not easy because you do not always know where to put the files?  <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line862">The package installer is a scripting framework for <a href="./MoinMoin.html">MoinMoin</a> which simplifies installing and delivering extensions for <a href="./MoinMoin.html">MoinMoin</a> very much. It has been already available since <a href="./DesktopEdition.html">DesktopEdition</a> 1.3.4 and <a href="./MoinMoin.html">MoinMoin</a> 1.5. <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line862">You could use this system to bundle specific templates which e.g. enhance your <a href="./MoinMoin.html">MoinMoin</a> to be a CRM system. Or you could make your plugins/themes easier installable. Hopefully we will be able to separate the system pages depending on their languages and just offer the languages you like. <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line867">
<h2 id="head-e9c573d67a0702330fb4cd6687a9c8490bef9641">1.1. Installing a package</h2>
<span class="anchor" id="line-14"></span><p class="line862">Some <em>superuser</em> (i.e. a user name contained in cfg.superuser list in the configuration) of the wiki will download your package file from somewhere, upload it to the wiki and then click install in the attached files view. Additionally, he could install the package using the command line (<tt class="backtick">MoinMoin/packages.py&nbsp;i&nbsp;package.zip</tt>). <span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><p class="line867">
<h2 id="head-7340378df41f8d26bb68038c1c020e64570b2b4e">1.2. Creating packages</h2>
<span class="anchor" id="line-17"></span><p class="line862">There are multiple possibilities to create a package. You can use the <a class="nonexistent" href="./HelpOnActions(2f)PackagePages.html">PackagePages</a> action in order to build a package automatically. <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><p class="line862">Or you can do it manually: you <em>create</em> a zip file which contains your files and a special file <tt class="backtick">MOIN_PACKAGE</tt>, the installation script. The script contains one command (sounds complicated but is not really, look at the examples below) per line and gets executed from top to bottom. <span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><p class="line862">Example script:<span class="anchor" id="line-22"></span><pre>MoinMoinPackage|1
<span class="anchor" id="line-23"></span>ReplaceUnderlay|mypage.txt|HelpContents
<span class="anchor" id="line-24"></span>AddRevision|mypage2.txt|FrontPage
<span class="anchor" id="line-25"></span>InstallPlugin|myparser.py|global|parser|myparser.py
<span class="anchor" id="line-26"></span></pre><span class="anchor" id="line-27"></span><ul><li>The first line simply marks the file as a script file and sets the revision of the used language. For now, it will be 1. <span class="anchor" id="line-28"></span></li><li><p class="line862">The second line replaces the underlay version of the page <a href="./HelpContents.html">HelpContents</a> with the file <tt class="backtick">mypage.txt</tt>. <span class="anchor" id="line-29"></span></li><li><p class="line862">The third line adds a new revision to the page <a href="./FrontPage.html">FrontPage</a>, i.e. changes it. <span class="anchor" id="line-30"></span></li><li>The fourth line installs a new parser. <span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span></li></ul><p class="line867">
<h3 id="head-f945219abc797cc2da6bc397d58cc1e1af793afc">1.2.1. Implemented commands</h3>
<span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line874">Note that the commands are not case-sensitive. <span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><ul><li><p class="line891"><tt class="backtick">Print|text</tt> <span class="anchor" id="line-37"></span><ul><li>Prints the text into the script output, the user will see it afterwards. <span class="anchor" id="line-38"></span></li></ul></li><li><p class="line891"><tt class="backtick">IgnoreExceptions|boolean</tt> <span class="anchor" id="line-39"></span><ul><li>Sets the ignore exceptions setting. If exceptions are ignored, the script does not stop if one is encountered. <span class="anchor" id="line-40"></span></li></ul></li><li><p class="line891"><tt class="backtick">SetThemeName|themename</tt> <span class="anchor" id="line-41"></span><ul><li>Sets the name of the theme which will be altered next. <span class="anchor" id="line-42"></span></li></ul></li><li><p class="line891"><tt class="backtick">CopyThemeFile|filename|type|target</tt> <span class="anchor" id="line-43"></span><ul><li>Copies a theme-related file (CSS, PNG, etc.) into a directory of the current theme. <span class="anchor" id="line-44"></span></li><li>Currently just supported on standalone-like servers. <span class="anchor" id="line-45"></span></li><li><p class="line862">Example: <tt class="backtick">CopyThemeFile|screen.css|css|screen.css</tt> <span class="anchor" id="line-46"></span></li></ul></li><li><p class="line891"><tt class="backtick">InstallPlugin|filename|visibility|plugintype|target</tt> <span class="anchor" id="line-47"></span><ul><li><p class="line862">Copies a plugin file from <em>filename</em> to <em>target</em>. <em>Visibility</em> may be <tt class="backtick">local</tt> which selects the plugin folder of the current wiki or <tt class="backtick">global</tt> will selects the folder of the MoinMoin python package. <em>plugintype</em> could be <tt class="backtick">parser</tt>, <tt class="backtick">macro</tt>, etc.  <span class="anchor" id="line-48"></span></li><li><p class="line862">Example: <tt class="backtick">InstallPlugin|myparser.py|global|parser|myparser.py</tt> <span class="anchor" id="line-49"></span></li></ul></li><li><p class="line891"><tt class="backtick">AddRevision|filename|pagename|author|comment|trivial</tt> <span class="anchor" id="line-50"></span><ul><li><p class="line862">Adds a revision (read from the file <em>filename</em>) to the page <em>pagename</em>. <em>author</em> specifies the name of the editor and is optional. <em>comment</em> specifies the comment of the revision and is optional. <em>trivial</em> specifies if the revision was a trivial edit and is optional. <span class="anchor" id="line-51"></span></li><li><p class="line862">Example (installs new template files):<span class="anchor" id="line-52"></span><pre>AddRevision|cust.tpl|CustomerTemplate
<span class="anchor" id="line-53"></span>AddRevision|phone.tpl|PhoneTemplate
<span class="anchor" id="line-54"></span></pre><span class="anchor" id="line-55"></span></li></ul></li><li><p class="line891"><tt class="backtick">DeletePage|pagename|comment</tt> <span class="anchor" id="line-56"></span><ul><li><p class="line862">Deletes the page <em>pagename</em>, optionally setting <em>comment</em>. <span class="anchor" id="line-57"></span></li><li><p class="line862">Example: <tt class="backtick">DeletePage|FrontPage</tt> <span class="anchor" id="line-58"></span></li></ul></li><li><p class="line891"><tt class="backtick">ReplaceUnderlay|filename|pagename</tt> <span class="anchor" id="line-59"></span><ul><li>Replaces the underlay version of the page. It can be used to install underlay pages or update them. <span class="anchor" id="line-60"></span></li></ul></li><li><p class="line891"><tt class="backtick">EnsureVersion|version|lines</tt> <span class="anchor" id="line-61"></span><ul><li><p class="line862">Aborts the script or skips lines if the version criteria is not met and <em>lines</em> is specified. <span class="anchor" id="line-62"></span></li><li><p class="line862">This example supplies to different parsers and installs the correct one: <span class="anchor" id="line-63"></span><pre>EnsureVersion|1.3.3|2
<span class="anchor" id="line-64"></span>InstallPlugin|myparser.py_3|global|parser|myparser.py
<span class="anchor" id="line-65"></span>Exit
<span class="anchor" id="line-66"></span>EnsureVersion|1.3.2
<span class="anchor" id="line-67"></span>InstallPlugin|myparser.py_2|global|parser|myparser.py
<span class="anchor" id="line-68"></span></pre><span class="anchor" id="line-69"></span></li></ul></li><li><p class="line891"><tt class="backtick">Exit</tt> <span class="anchor" id="line-70"></span><ul><li>Stops the script. <span class="anchor" id="line-71"></span></li></ul></li><li><p class="line891"><tt class="backtick">InstallPackage|Pagename|Filename</tt> <span class="anchor" id="line-72"></span><ul><li><p class="line862">Installs another package which has to be an attachment called <em>Filename</em> of the page <em>Pagename</em>. <span class="anchor" id="line-73"></span></li><li><p class="line862">Example: <tt class="backtick">InstallPackage|FrontPage|MyCoolPlugin.zip</tt> <span class="anchor" id="line-74"></span></li></ul></ul><span class="anchor" id="bottom"></span></div>
</div>
<hr>
2007-07-30 15:45
</body>
</html>
