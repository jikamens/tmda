<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>HelpOnInstalling/BasicInstallation</title>
<link rel="stylesheet" type="text/css" media="all" charset="utf-8" href="mentalwealth/css/common.css">
<link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="mentalwealth/css/screen.css">
<link rel="stylesheet" type="text/css" media="print" charset="utf-8" href="mentalwealth/css/print.css">
</head>
<body>
<table>
<tr>
<td>
<img src="logo.png">
</td>
<td>
&nbsp;[<a href="FrontPage.html">FrontPage</a>]&nbsp;[<a href="TitleIndex.html">TitleIndex</a>]&nbsp;[<a href="WordIndex.html">WordIndex</a>]
</td>
</tr>
</table>
<hr>
<div id="page">
<h1 id="title">HelpOnInstalling/BasicInstallation</h1>
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line867"><span class="anchor" id="line-8"></span><p class="line867"><strong>How to do a basic installation of <a href="./MoinMoin.html">MoinMoin</a> on your system.</strong> <span class="anchor" id="line-9"></span><span class="anchor" id="line-10"></span><p class="line867"><strong>Contents</strong> <span class="anchor" id="line-11"></span><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li><a href="#head-2fa431ad9c9bff5badd07c5ee676b19852ed28e3">Check if Python is working</a></li><li><a href="#head-119b1acf8110bb618e4f366c3d1f8a35ad625f75">Download MoinMoin</a></li><li><a href="#head-a84e58c8b4256bd645b9c47b5a900219a356259f">Install MoinMoin</a><ol><li><a href="#head-640b21abea127e7ac4b48c938607c233b7119bd5">Installing in the default system location</a></li><li><a href="#head-ae8ab55eb5e8c11d4fd1eb06e12d69f1b33d411b">Installing in the home directory or another specific location</a></li></ol><li><a href="#head-d7d600c8dcfdd9270f4a6642566404ede510f46a">Test installation</a></li><li><a href="#head-87a60f1d02c36fb1804b442815dba49cbc8adfe7">What has been installed</a></li></ol></div><p class="line874"> <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line862">Before you can integrate Moin<tt class="backtick"></tt>Moin into your web environment, you have to install the <a href="./MoinMoin.html">MoinMoin</a> source code and data files using the standard Python <em>distutils</em> mechanism (<tt class="backtick">setup.py</tt>). This page explains the steps you usually need to take to do this. For more details on the <em>distutils</em> installation process, consult the <a class="http" href="http://www.python.org/doc/current/inst/inst.html">Installing Python Modules</a> document in your Python documentation set. <span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span><p class="line874">The installation is similar on Windows and Linux (and other POSIX-type systems; for simplicity, we just say "Linux" in the docs). <span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="(!)" height="15" src="./mentalwealth/img/idea.png" title="(!)" width="15" /> We use text such as <strong><tt class="backtick">&gt;&nbsp;command&nbsp;arguments</tt></strong> to show what you have to type at the command prompt (also known as shell, terminal, etc.). In our examples "<tt class="backtick">&gt;&nbsp;</tt>" is the prompt, you don't have to type it in, you have to type what comes after it. Lines that do not begin with "<tt class="backtick">&gt;&nbsp;</tt>" are the answers to the commands you have typed. Read them carefully. <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span></li></ul><p class="line867">
<h1 id="head-2fa431ad9c9bff5badd07c5ee676b19852ed28e3">1. Check if Python is working</h1>
<span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span><p class="line862">Moin<tt class="backtick"></tt>Moin needs Python to run, so the first step is to check if an usable version of Python is installed and correctly set-up. If this is not the case, you will have to fix that before you can proceed. <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line862">The <tt class="backtick">CHANGES</tt> file in the Moin<tt class="backtick"></tt>Moin archive mentions what versions are supported. Python 2.3 is the minimum requirement for Moin<tt class="backtick"></tt>Moin 1.5, but we suggest you use the latest Python release version. <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><p class="line862">You can download Python at <a class="http" href="http://www.python.org/download/">http://www.python.org/download/</a>. <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><p class="line862">If you are pretty sure an acceptable version of Python is installed but the commands below do not work, this may be because your Python files are not in the <em>search path</em>. Correctly setting the search path is outside the scope of this document; please ask for help on your favorite Python, Linux, or Windows discussion board. <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><p class="line874">If you have shell access, checking if Python is working is very simple. Just type the following command, and look at the result: <span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><pre>&gt; python -V
<span class="anchor" id="line-32"></span>Python 2.3.4
<span class="anchor" id="line-33"></span></pre><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><p class="line862">If you don't have shell access, you can try using this <tt class="backtick">pythontest.cgi</tt> script (it assumes that you are using a Linux kind of webserver). Upload the script to your <tt class="backtick">cgi-bin</tt> directory, use <tt class="backtick">chmod&nbsp;a+rx&nbsp;pythontest.cgi</tt> (or a similar command in your FTP program) to make it executable, and invoke it using your web browser. <span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><pre>#!/bin/sh
echo Content-Type: text/plain
echo
echo "Your web server is running as:"
id
echo "CGI scripts work"
echo "Now we try to invoke Python interpreters and get their versions:"
echo "Your default version of python is:"
python -V 2&gt;&amp;1
echo 
echo "Available versions of python are:"
python2.2 -V 2&gt;&amp;1 &amp;&amp; which python2.2
python2.3 -V 2&gt;&amp;1 &amp;&amp; which python2.3
python2.4 -V 2&gt;&amp;1 &amp;&amp; which python2.4
python2.5 -V 2&gt;&amp;1 &amp;&amp; which python2.5
echo "Finished."

</pre><p class="line867"><a class="attachment" href="attachments/HelpOnInstalling(2f)BasicInstallation/pythontest.cgi" title="attachment:pythontest.cgi">pythontest.cgi</a> <span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><p class="line874">If it doesn't display "CGI scripts work", well, then CGI scripts don't work. If it doesn't show one or more Python version numbers, then Python is not correctly installed. In both cases, before you can proceed, you will have to get in touch with the administrator of the server so that the problems get corrected. <span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><p class="line862">Also be sure to read <a href="./HelpOnInstalling(2f)ApacheOnLinuxFtp.html">../ApacheOnLinuxFtp</a> after you've completed the <a href="./HelpOnInstalling(2f)BasicInstallation.html">../BasicInstallation</a> illustrated here. <span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><p class="line867">
<h1 id="head-119b1acf8110bb618e4f366c3d1f8a35ad625f75">2. Download MoinMoin</h1>
<span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span><p class="line862">To download the distribution archive, go to the <a class="http" href="http://sourceforge.net/project/showfiles.php?group_id=8482">download area</a> and fetch the latest archive. <span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span><p class="line862">The next step is to unpack the distribution archive (which you have done already if you are reading this text from your hard drive). If you read this on the web, the distribution comes in a versioned <tt class="backtick">.tar.gz</tt> archive, which you can unpack as shown below. <span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><ul><li>On Windows <span class="anchor" id="line-50"></span><ul><li><p class="line862">You can use recent versions of programs like Win<tt class="backtick"></tt>Zip, Win<tt class="backtick"></tt>Rar, and Win<tt class="backtick"></tt>Ace, which handle .tar.gz kind of archives. <span class="anchor" id="line-51"></span></li><li><p class="line862">At the command prompt, you can use <a class="http" href="http://gnuwin32.sourceforge.net/packages/gzip.htm">GNU gzip</a> and <a class="http" href="http://gnuwin32.sourceforge.net/packages/tar.htm">GNU tar</a> for Windows. <span class="anchor" id="line-52"></span></li></ul></li><li>On Linux <span class="anchor" id="line-53"></span><ul><li>You can use your favorite file manager -- it should be able to unpack them. <span class="anchor" id="line-54"></span></li><li><p class="line862">At any shell prompt, you can use the <tt class="backtick">tar</tt> command. <span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span></li></ul></li></ul><p class="line862">The distribution archive will always unpack into a directory named <tt class="backtick">moin-&lt;version&gt;</tt>, for example <tt class="backtick">moin-1.5</tt>. <span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span><p class="line862">Here is how you would unpack the archive (using GNU tar) and enter the directory with the Moin<tt class="backtick"></tt>Moin files: <span class="anchor" id="line-59"></span><span class="anchor" id="line-60"></span><pre>&gt; tar xzf moin-1.5.0.tar.gz
<span class="anchor" id="line-61"></span>&gt; cd moin-1.5.0
<span class="anchor" id="line-62"></span></pre><span class="anchor" id="line-63"></span><span class="anchor" id="line-64"></span><p class="line867">
<h1 id="head-a84e58c8b4256bd645b9c47b5a900219a356259f">3. Install MoinMoin</h1>
<span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><p class="line862">You can install Moin<tt class="backtick"></tt>Moin to either: <span class="anchor" id="line-67"></span><ul><li>a system location (if you have the necessary rights to do that -- on Linux you need to be root) <span class="anchor" id="line-68"></span></li><li><p class="line862">some specific location, like your home directory (Linux) or <tt class="backtick">C:\moin</tt> (Windows). <span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span></li></ul><p class="line874">The installation to a system location is easier, so choose that if possible. <span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><p class="line867"><img alt="/!\" height="15" src="./mentalwealth/img/alert.png" title="/!\" width="15" /> If you have several versions of Python installed, please use the same version for setup and for running the wiki. Usually, the latest Python version will get the best results. <span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><p class="line862">If you have problems with the <tt class="backtick">setup.py</tt> install step, try using the command: <span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><pre>&gt; python -v setup.py --quiet install --record=install.log
<span class="anchor" id="line-77"></span></pre><span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span><p class="line862">The additional <tt class="backtick">-v</tt> flag should provide you detailed verbose messages every step of the way. <span class="anchor" id="line-80"></span><span class="anchor" id="line-81"></span><p class="line867"><img alt="/!\" height="15" src="./mentalwealth/img/alert.png" title="/!\" width="15" /> On Linux, if u get an error like <tt class="backtick">Invalid&nbsp;Python&nbsp;installation:&nbsp;cannot&nbsp;find&nbsp;/usr/lib/Python2.x/config/Makefile</tt>, you may not have the python module <strong><tt class="backtick">distutils</tt></strong> installed, it's usually a part of the <strong>Python development libarary (<tt class="backtick">python-dev</tt>)</strong>. Some Linux distributions may not have installed it by default. For example, on Mandrake you need to install the <strong><tt class="backtick">python-devel</tt></strong> package, on Debian it's called <strong><tt class="backtick">python-dev</tt></strong>. <span class="anchor" id="line-82"></span><span class="anchor" id="line-83"></span><p class="line867">
<h2 id="head-640b21abea127e7ac4b48c938607c233b7119bd5">3.1. Installing in the default system location</h2>
<span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span><p class="line867"><span class="anchor" id="line-86"></span><pre>&gt; python setup.py --quiet install --record=install.log
<span class="anchor" id="line-87"></span></pre><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><p class="line862">This installs Moin<tt class="backtick"></tt>Moin to the default system location (typically the Python directory, for example on Linux, inside <tt class="backtick">/usr/lib</tt> and <tt class="backtick">/usr/share</tt>). Look at the <tt class="backtick">install.log</tt> file to see what was installed, and where. <span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><ul><li>Mac OS X note: use the command: <span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><pre>python setup.py install --install-data='/usr/local'
<span class="anchor" id="line-94"></span></pre><span class="anchor" id="line-95"></span>This will install the shared files to '/usr/local/share/moin', instead of an inconvenient location in the System folder. <span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span></li></ul><p class="line867">
<h2 id="head-ae8ab55eb5e8c11d4fd1eb06e12d69f1b33d411b">3.2. Installing in the home directory or another specific location</h2>
<span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span><p class="line874">Linux example, installing in the home directory: <span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><pre>&gt; python setup.py --quiet install --prefix=$HOME --record=install.log
<span class="anchor" id="line-102"></span></pre><span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span><p class="line862">Windows example, installing in the <tt class="backtick">C:\moin</tt> directory: <span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><pre>&gt; python setup.py --quiet install --prefix="C:\moin" --record=install.log
<span class="anchor" id="line-107"></span></pre><span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><p class="line862">All Moin<tt class="backtick"></tt>Moin files will then be installed inside those directories, see <tt class="backtick">install.log</tt> to know which files were installed, and where. <span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><p class="line867"><strong>Note:</strong> You will likely see the following warning: <span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><ul><li style="list-style-type:none"><p class="line891"><tt class="backtick">warning:&nbsp;install:&nbsp;modules&nbsp;installed&nbsp;to&nbsp;'C:\moin\',&nbsp;which</tt><br />
 <span class="anchor" id="line-114"></span><tt class="backtick">is&nbsp;not&nbsp;in&nbsp;Python's&nbsp;module&nbsp;search&nbsp;path&nbsp;(sys.path)&nbsp;--&nbsp;you'll</tt><br />
 <span class="anchor" id="line-115"></span><tt class="backtick">have&nbsp;to&nbsp;change&nbsp;the&nbsp;search&nbsp;path&nbsp;yourself</tt> <span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span></li></ul><p class="line862">This means exactly what it says, you need to add your install directory to the search path of Python, or it won't find the Moin<tt class="backtick"></tt>Moin code. <span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><p class="line862">For example, if you are running using a webserver and standard CGI, edit <tt class="backtick">moin.cgi</tt> and add your installation directory to the Python path, like this: <span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><pre>import sys
<span class="anchor" id="line-122"></span>sys.path.insert(0, 'C:/moin')
<span class="anchor" id="line-123"></span></pre><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><p class="line867">
<h1 id="head-d7d600c8dcfdd9270f4a6642566404ede510f46a">4. Test installation</h1>
<span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span><p class="line862">As a final step, if you have access to the shell or the command prompt, you can check that everything is correctly installed and ready to run. Start Python and type <tt class="backtick">import&nbsp;MoinMoin</tt>. Nothing should be displayed in response to this command. Example: <span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><p class="line867"><span class="anchor" id="line-130"></span><pre>&gt; python
<span class="anchor" id="line-131"></span>Python 2.3.4 (#1, May 29 2004, 17:05:23)
<span class="anchor" id="line-132"></span>[GCC 3.3.3] on linux2
<span class="anchor" id="line-133"></span>Type "help", "copyright", "credits" or "license" for more information.
<span class="anchor" id="line-134"></span>&gt;&gt;&gt; import MoinMoin
<span class="anchor" id="line-135"></span>&gt;&gt;&gt;
<span class="anchor" id="line-136"></span></pre><span class="anchor" id="line-137"></span><span class="anchor" id="line-138"></span><p class="line874">If you get this instead: <span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span><p class="line867"><span class="anchor" id="line-141"></span><pre>&gt;&gt;&gt; import MoinMoin
<span class="anchor" id="line-142"></span>Traceback (most recent call last):
<span class="anchor" id="line-143"></span>  File "&lt;stdin&gt;", line 1, in ?
<span class="anchor" id="line-144"></span>ImportError: No module named MoinMoin
<span class="anchor" id="line-145"></span>&gt;&gt;&gt;
<span class="anchor" id="line-146"></span></pre><span class="anchor" id="line-147"></span><span class="anchor" id="line-148"></span><p class="line862">then you have to tune your installation. Try modifying <tt class="backtick">sys.path</tt>, as described above. <span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span><p class="line867">
<h1 id="head-87a60f1d02c36fb1804b442815dba49cbc8adfe7">5. What has been installed</h1>
<span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span><p class="line862">So, you have a ready-to-work Moin<tt class="backtick"></tt>Moin installation now. Congratulations! Before you go on to configuring it, take a look at the various files and directories that have been installed. <span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span><p class="line867"><img alt="/!\" height="15" src="./mentalwealth/img/alert.png" title="/!\" width="15" /> It is important that you understand the different locations used in a Moin<tt class="backtick"></tt>Moin setup, so read this carefully. <span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span><p class="line862">In the following descriptions, <tt class="backtick">PREFIX</tt> is what you used with the <tt class="backtick">setup.py</tt> command, or a default location if you didn't use the <tt class="backtick">--prefix</tt> option. (Typical default values on Linux are <tt class="backtick">/usr</tt> and <tt class="backtick">/usr/local</tt>.) <tt class="backtick">X.Y</tt> is the version of Python. Typically, this is <tt class="backtick">2.3</tt> or <tt class="backtick">2.4</tt>. <span class="anchor" id="line-157"></span><span class="anchor" id="line-158"></span><p class="line862">Look into <tt class="backtick">install.log</tt> to find out about following important locations: <span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><ul><li><p class="line891"><strong><tt class="backtick">MoinMoin</tt> directory</strong>, usually <tt class="backtick">PREFIX/lib/pythonX.Y/site-packages/MoinMoin</tt> -- this is where the Moin<tt class="backtick"></tt>Moin <strong>source code</strong> is located <span class="anchor" id="line-161"></span></li><li><p class="line891"><strong><tt class="backtick">share</tt> directory</strong>, usually <tt class="backtick">PREFIX/share/moin</tt> - this is where the <em>templates</em> are located <span class="anchor" id="line-162"></span><ul><li><p class="line891"><strong><tt class="backtick">data</tt></strong> directory (wiki pages, users, etc.) - only Moin<tt class="backtick"></tt>Moin should access this <span class="anchor" id="line-163"></span></li><li><p class="line891"><strong><tt class="backtick">underlay</tt></strong> directory (wiki pages) - only Moin<tt class="backtick"></tt>Moin should access this <span class="anchor" id="line-164"></span></li><li><p class="line891"><strong><tt class="backtick">htdocs</tt></strong> directory with html support files (images for the various themes, etc.) - the web server will need to access this <span class="anchor" id="line-165"></span></li><li><p class="line891"><strong><tt class="backtick">server</tt></strong> - Moin<tt class="backtick"></tt>Moin example startup files (like <tt class="backtick">moin.cgi</tt> for CGI, and other files for other startup methods) <span class="anchor" id="line-166"></span></li><li><p class="line891"><strong><tt class="backtick">config</tt></strong> - Moin<tt class="backtick"></tt>Moin example configuration files (like <tt class="backtick">wikiconfig.py</tt>) <span class="anchor" id="line-167"></span></li></ul></li><li><p class="line891"><strong><tt class="backtick">bin</tt></strong> directory with some scripts that help you use the Moin<tt class="backtick"></tt>Moin shell commands <span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span></li></ul><p class="line862">We talk of <em>templates</em> in the <tt class="backtick">share</tt> directory because you usually will not use those files at that location, but copy them elsewhere when you need them. This way, you can set-up several wikis without problems, and easily upgrade to new Moin<tt class="backtick"></tt>Moin versions. <span class="anchor" id="line-170"></span><span class="anchor" id="bottom"></span></div>
</div>
<hr>
2007-07-30 15:45
</body>
</html>
