<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>HelpOnInstalling/ApacheOnMacOsx</title>
<link rel="stylesheet" type="text/css" media="all" charset="utf-8" href="mentalwealth/css/common.css">
<link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="mentalwealth/css/screen.css">
<link rel="stylesheet" type="text/css" media="print" charset="utf-8" href="mentalwealth/css/print.css">
</head>
<body>
<table>
<tr>
<td>
<img src="logo.png">
</td>
<td>
&nbsp;[<a href="FrontPage.html">FrontPage</a>]&nbsp;[<a href="TitleIndex.html">TitleIndex</a>]&nbsp;[<a href="WordIndex.html">WordIndex</a>]
</td>
</tr>
</table>
<hr>
<div id="page">
<h1 id="title">HelpOnInstalling/ApacheOnMacOsx</h1>
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line874">You must not be afraid to use the terminal. It is possible but much harder to install without using the terminal. <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line874">There are 2 step in the installation: <span class="anchor" id="line-10"></span><ol type="1"><li><p class="line862">Install the <a href="./MoinMoin.html">MoinMoin</a> engine - once <span class="anchor" id="line-11"></span></li><li>Create wiki instance. You can create and serve as many wikis as you like. <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span></li></ol><p class="line867">
<h1 id="head-c94edbb5fa226613bc614ed4817a423e49bfab74">1. Installing MoinMoin</h1>
<span class="anchor" id="line-15"></span><p class="line867">
<h2 id="head-fab7fde843537e1c43e51293df06cf230070066f">1.1. Download</h2>
<span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line862">Download the source on the Desktop. You should see a <tt class="backtick">moin-1.3.tar.gz</tt> file. Extract this file on the desktop with Stuffit Expander, or from the terminal (faster and safer): <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span><pre>cd ~/Desktop
<span class="anchor" id="line-20"></span>tar -xzf moin-1.3.0.tar.gz
<span class="anchor" id="line-21"></span></pre><span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span><p class="line867">
<h2 id="head-fe44f2863565a3eaecef0a33bc1e9a1f4c96638f">1.2. Install procedure</h2>
<span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span><p class="line862">Use these commands in the terminal to install the MoinMoin wiki engine into the system. <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><p class="line862">First, open a shell as root. You will need this to install <a href="./MoinMoin.html">MoinMoin</a> and configure the wiki. When asked, enter your password. <span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><pre>sudo -s
<span class="anchor" id="line-30"></span>... password:
<span class="anchor" id="line-31"></span></pre><span class="anchor" id="line-32"></span><p class="line874">Now you have root privileges in this shell. <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line874">Install: <span class="anchor" id="line-35"></span><span class="anchor" id="line-36"></span><pre>cd moin-1.3.0
<span class="anchor" id="line-37"></span>python setup.py install --install-data='/usr/local'
<span class="anchor" id="line-38"></span></pre><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="(!)" height="15" src="./mentalwealth/img/idea.png" title="(!)" width="15" /> The --install-data='/usr/local' will put the shared data in the convenient <tt class="backtick">'/usr/local/share/moin'</tt> folder. If you don't use it, your shared data will be at <tt class="backtick">'/System/Library/Frameworks/Python.framework/Versions/2.3/share/moin'</tt>. On Mac OS X, '/usr' belong to Apple, and it is safer to install in '/usr/local'. <span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><p class="line891"><img alt="(!)" height="15" src="./mentalwealth/img/idea.png" title="(!)" width="15" /> The default Python used by Apache is the framework one supplied by Apple.  If you have added another Python version such as through <a class="nonexistent" href="./DarwinPorts.html">DarwinPorts</a> or Fink, then you should substitute "/usr/bin/python" for "python" above or you should substitute the specific path for the Python that will be used by Apache. <span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span></li></ul><p class="line874">Now the installation is finished. You will not have to repeat this step unless you upgrade moin. <span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><p class="line867">
<h2 id="head-7cf05b3d73a21fa16eabfdced354c3e079182014">1.3. Optional Installs</h2>
<span class="anchor" id="line-47"></span><span class="anchor" id="line-48"></span><p class="line867">
<h3 id="head-223faa3a0e587eb269f79e3faf05d3851d778e8d">1.3.1. RSS</h3>
<span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span><p class="line862">If you want your wiki to support RSS and Mozilla Firefox Live Bookmarks features, you have to install PyXML. Get PyXML from <a class="http" href="http://sourceforge.net/projects/pyxml/">http://sourceforge.net/projects/pyxml/</a> and install according to the instructions. <span class="anchor" id="line-51"></span>
<h1 id="head-0cd30234950a8438af556cb7a93ef4dd346358a3">2. Creating a wiki</h1>
<span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><p class="line874">After you have installed the software, you need to create a wiki. You may create several wikis if you need. <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><p class="line867">
<h2 id="head-df71f35b5f6ca32f75dd1e1d9c71a7113906c308">2.1. Copying a template wiki</h2>
<span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><p class="line862">Copy a template wiki from the <tt>/usr/local/share/moin</tt>. Do not try to run the wiki from <tt>/usr/local/share/moin/data</tt> because your wiki will be overwritten when you install a new version of moin. <span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="&lt;!&gt;" height="15" src="./mentalwealth/img/attention.png" title="&lt;!&gt;" width="15" /> <strong>Security warning: do not put your wiki folder where the web server can access it! Your wiki should not be at the "Sites" folder in your home folder.</strong> <span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span></li></ul><p class="line874">The following instructions will create a wiki called "mywiki". You can choose any name you like, except the reserved name "wiki". <span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><p class="line874">Do these commands: <span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><pre>cd /usr/local/share/moin
<span class="anchor" id="line-66"></span>mkdir mywiki
<span class="anchor" id="line-67"></span>cp -r data mywiki
<span class="anchor" id="line-68"></span>cp -r underlay mywiki
<span class="anchor" id="line-69"></span>cp server/moin.cgi mywiki
<span class="anchor" id="line-70"></span>cp config/wikiconfig.py mywiki
<span class="anchor" id="line-71"></span></pre><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><p class="line867">
<h2 id="head-49456651956c5f3bbba97c6917e54be2420fbf14">2.2. Setting Permissions</h2>
<span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span><p class="line874">You have to make the web server the owner of the files in your wiki. Unless you changed the default configuration, both are 'www'. <span class="anchor" id="line-76"></span><span class="anchor" id="line-77"></span><pre>chown -R www:www mywiki
<span class="anchor" id="line-78"></span>chmod -R ug+rwX mywiki
<span class="anchor" id="line-79"></span>chmod -R o-rwx mywiki
<span class="anchor" id="line-80"></span></pre><span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span><p class="line867">
<h2 id="head-31a82db9b85a63663e1b46abf203b3c0abdb5fad">2.3. Configure Apache</h2>
<span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><p class="line874">We'll use the pico editor: <span class="anchor" id="line-85"></span><span class="anchor" id="line-86"></span><pre>pico /etc/httpd/httpd.conf
<span class="anchor" id="line-87"></span></pre><span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><p class="line874">Go to the end of the Aliases section and edit like the example below: <span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><pre>    Alias /wiki/ "/usr/local/share/moin/htdocs/"      
<span class="anchor" id="line-92"></span>    ScriptAlias /mywiki "/usr/local/share/moin/mywiki/moin.cgi"       
<span class="anchor" id="line-93"></span></pre><span class="anchor" id="line-94"></span><p class="line874">Use Control+O to save the file and Control+X to exit pico. <span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><p class="line874">Restart Apache - open System Preferences, go to the Sharing page, select "Personal Web Sharing" and click "Stop" then "Start". Or just type this instead: <span class="anchor" id="line-97"></span><span class="anchor" id="line-98"></span><pre>apachectl graceful
<span class="anchor" id="line-99"></span>... /usr/sbin/apachectl graceful: httpd gracefully restarted
<span class="anchor" id="line-100"></span></pre><span class="anchor" id="line-101"></span><span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><p class="line874">Instance creation finished - exit from the shell with the root privileges - working as root is dangerous. <span class="anchor" id="line-104"></span><span class="anchor" id="line-105"></span><pre>exit
<span class="anchor" id="line-106"></span></pre><span class="anchor" id="line-107"></span><p class="line874">Now you are running again safely. <span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><p class="line867">
<h2 id="head-eb585ff24f9cd4b445a74b848cd1c5ec2b10706a">2.4. Testing Your New Wiki</h2>
<span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><p class="line862">In a web-browser surf to the site: <a class="http" href="http://localhost/mywiki">http://localhost/mywiki</a> <span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span><p class="line862">You should see the FrontPage of your new wiki. <span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span><p class="line862">Now run the unit tests, to make sure everything is fine. Go to this address: <a class="http" href="http://localhost/mywiki?action=test">http://localhost/mywiki?action=test</a> <span class="anchor" id="line-117"></span><span class="anchor" id="line-118"></span><p class="line862">You should see a report on the wiki and tests results for the <a href="./MoinMoin.html">MoinMoin</a> engine. If some of the tests fail, please report the problem on <a class="http" href="http://moinmoin.wikiwikiweb.de/MoinMoinBugs">MoinMoinBugs</a>. <span class="anchor" id="line-119"></span><span class="anchor" id="line-120"></span><p class="line867">
<h2 id="head-14a0f4b701dc07823ca965841351a2bd3d021b8e">2.5. Configuring Your wiki</h2>
<span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><p class="line862">The wiki you created is a new "Untitled Wiki", using the default configuration. You want to give a better name and setup some configuration values. Open <tt>wikiconfig.py</tt> and read the comments. You can edit the file with any text editor, like pico, emacs, or BBEdit.  <span class="anchor" id="line-123"></span><span class="anchor" id="line-124"></span><ul><li style="list-style-type:none"><p class="line891"><img alt="(!)" height="15" src="./mentalwealth/img/idea.png" title="(!)" width="15" /> Note that the file belongs to user and group www:www. You can edit the file as root, or change the group of the file to yourself with <tt>chown&nbsp;www:username&nbsp;wikiconfig.py</tt>. <span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span></li></ul><p class="line862">For more help on configuration, see <a href="./HelpOnConfiguration.html">HelpOnConfiguration</a>. <span class="anchor" id="line-127"></span><span class="anchor" id="bottom"></span></div>
</div>
<hr>
2007-07-30 15:45
</body>
</html>
