<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>HelpOnThemes</title>
<link rel="stylesheet" type="text/css" media="all" charset="utf-8" href="mentalwealth/css/common.css">
<link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="mentalwealth/css/screen.css">
<link rel="stylesheet" type="text/css" media="print" charset="utf-8" href="mentalwealth/css/print.css">
</head>
<body>
<table>
<tr>
<td>
<img src="logo.png">
</td>
<td>
&nbsp;[<a href="FrontPage.html">FrontPage</a>]&nbsp;[<a href="TitleIndex.html">TitleIndex</a>]&nbsp;[<a href="WordIndex.html">WordIndex</a>]
</td>
</tr>
</table>
<hr>
<div id="page">
<h1 id="title">HelpOnThemes</h1>
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span><p class="line867"><a href="./MoinMoin.html">MoinMoin</a> has a theme plugin system that makes it easy to change the look and feel without touching the core code. You can customize colors by editing the stylesheets, or create a totally new user interface by writing a new theme plugin in Python. When you upgrade <a href="./MoinMoin.html">MoinMoin</a>, your theme is not touched - it will work with the new version, or needs only small changes due to theme API changes. <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span><p class="line867"><div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li><a href="#head-18c685b8dd6b4d93febee4d9c2125e60e0b00401">The Components</a><ol><li><a href="#head-a0807a8d38a1279ed228d82156e00f3102bc8879">Stylesheets</a></li><li><a href="#head-fe059325808dfeca1c96ba66b25512364b0c494e">Images</a></li><li><a href="#head-ccdabe3c3884201235ae05d92476b5b29a45458e">Python module</a></li></ol><li><a href="#head-0f9b4561b6bd896ec150c626df63d39d77be3973">Installation of a new theme</a></li><li><a href="#head-c9a07412cea7e47a9bebf10ff614e6296c5e2438">Setting the default theme</a></li><li><a href="#head-2c83febe1d3bda8ef50855f3786baf5d65a892ad">Sharing your theme</a></li><li><a href="#head-6d3415d172c5e1e0bf3271928ef685ad86f6e081">When you don't have to make a theme</a></li></ol></div><p class="line874"> <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line867">
<h1 id="head-18c685b8dd6b4d93febee4d9c2125e60e0b00401">The Components</h1>
<span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span><p class="line874">A theme "THEMENAME" is made of these components: <span class="anchor" id="line-14"></span><ul><li><p class="line862">set of CSS stylesheets, in <tt class="backtick">/usr/share/moin/htdocs/THEMENAME/css/</tt> <span class="anchor" id="line-15"></span></li><li><p class="line862">Collection of images in <tt class="backtick">/usr/share/moin/htdocs/THEMENAME/img/</tt> <span class="anchor" id="line-16"></span></li><li><p class="line862">a Python module in <tt class="backtick">MoinMoin/theme/THEMENAME.py</tt> or in your wiki <tt class="backtick">data/plugin/theme/THEMENAME.py</tt> <span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span></li></ul><p class="line867">
<h2 id="head-a0807a8d38a1279ed228d82156e00f3102bc8879">Stylesheets</h2>
<span class="anchor" id="line-19"></span><span class="anchor" id="line-20"></span><p class="line874">All current themes are heavily based on CSS. So for easy changes (like changing colours or fonts, moving around stuff), you maybe only need to change the CSS. <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><p class="line867">
<h2 id="head-fe059325808dfeca1c96ba66b25512364b0c494e">Images</h2>
<span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><p class="line862">When you do a new theme, copy all images from <tt class="backtick">classic</tt> to your img directory and then modify as needed. If you modify an image, do not forget to update the icon dict in the theme code - the image geometry is stored there for faster rendering. <span class="anchor" id="line-25"></span><span class="anchor" id="line-26"></span><p class="line867">
<h2 id="head-ccdabe3c3884201235ae05d92476b5b29a45458e">Python module</h2>
<span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><p class="line862">The theme code is called by moinmoin with (more or less) abstract data in a dictionary usually called <tt class="backtick">d</tt>. The code then uses items in that dictionary to generate HTML (also heavily relying on CSS). The new theme system in 1.3 avoid using the data dictionary when possible, and instead call different moin parts to get the needed data.  <span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><p class="line874">When you do a new theme, first clone your favorite theme, then try to edit the stylesheets to get what you want. Only if you can't reach your goal using CSS only, override some functions in your theme code. <span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span><p class="line862">All themes are sub classes of <a href="./MoinMoin.html">MoinMoin</a>.theme.<a class="nonexistent" href="./ThemeBase.html">ThemeBase</a> which define the primitive user interface elements, like logo, username, title, searchform, editbar, actions menu etc. You should reuse these parts unless you need to change their content or create new element that you can not build from existing parts. The theme API is not stable yet, and might change in the future. <span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><p class="line867">
<h1 id="head-0f9b4561b6bd896ec150c626df63d39d77be3973">Installation of a new theme</h1>
<span class="anchor" id="line-35"></span><p class="line862">To install a theme, unpack the archive and copy the resulting top-level directory (e.g., leftsibebar2) to the wikis htdocs directory, e.g. <tt class="backtick">/usr/share/moin/mywiki/htdocs</tt>. You should end up with the following subdirectories: <tt class="backtick">css/</tt>, <tt class="backtick">img/</tt>. <span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><p class="line862">After you do this, copy the file <tt class="backtick">THEMENAME.py</tt> (e.g., <tt class="backtick">leftsidebar2.py</tt>) to the <tt class="backtick">data/plugin/theme</tt> directory of your wiki. <span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><p class="line867">
<h1 id="head-c9a07412cea7e47a9bebf10ff614e6296c5e2438">Setting the default theme</h1>
<span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><p class="line862">Once you have created all the necessary theme components and saved them as indicated above, the theme can be applied to your wiki by using the <tt class="backtick">theme_default</tt> option in <tt class="backtick">wikiconfig.py</tt> (see <a href="./HelpOnConfiguration.html">HelpOnConfiguration</a>).  <span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><p class="line867">
<h1 id="head-2c83febe1d3bda8ef50855f3786baf5d65a892ad">Sharing your theme</h1>
<span class="anchor" id="line-44"></span><p class="line862">If you made a nice theme (of course adhering to HTML and CSS standards), package it like described below and put it onto <a class="interwiki" href="http://purl.net/wiki/moin/ThemeMarket" title="MoinMoin">ThemeMarket</a>. Please put it under GPL license, if possible. <span class="anchor" id="line-45"></span><span class="anchor" id="line-46"></span><p class="line867"><span class="anchor" id="line-47"></span><pre># &lt;THEMENAME&gt;-&lt;VERSION&gt;.tar.gz (or .zip), containing:
<span class="anchor" id="line-48"></span>&lt;THEMENAME&gt;/&lt;THEMENAME&gt;.py
<span class="anchor" id="line-49"></span>&lt;THEMENAME&gt;/img/*.png
<span class="anchor" id="line-50"></span>&lt;THEMENAME&gt;/css/*.css
<span class="anchor" id="line-51"></span></pre><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span><p class="line867">
<h1 id="head-6d3415d172c5e1e0bf3271928ef685ad86f6e081">When you don't have to make a theme</h1>
<span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><ol type="1"><li>head <span class="anchor" id="line-56"></span><ul><li><p class="line862">config.html_head is added into the &lt;head&gt; element for <em>all</em> pages, while <span class="anchor" id="line-57"></span></li></ul></li><li>body <span class="anchor" id="line-58"></span><ul><li><p class="line862">you can use some html fragments to customize moin's output (we are referring to <tt class="backtick">classic</tt> theme, others could differ) - here is the sequence how stuff is output: <span class="anchor" id="line-59"></span></li><li>header: <span class="anchor" id="line-60"></span><ul><li>config.page_header1 <span class="anchor" id="line-61"></span></li><li>config.logo_string - use this to modify the logo (usually at top left) <span class="anchor" id="line-62"></span></li><li>username, title <span class="anchor" id="line-63"></span></li><li>iconbar <span class="anchor" id="line-64"></span></li><li>config.navi_bar - is a list of page names that are added to the title area, if None, add no navigation bar. <span class="anchor" id="line-65"></span></li><li>trail <span class="anchor" id="line-66"></span></li><li>config.page_header2 <span class="anchor" id="line-67"></span></li><li>msg <span class="anchor" id="line-68"></span></li></ul></li><li>wiki page <span class="anchor" id="line-69"></span></li><li>footer: <span class="anchor" id="line-70"></span><ul><li>config.page_credits <span class="anchor" id="line-71"></span></li><li>config.page_footer1 <span class="anchor" id="line-72"></span></li><li><p class="line862">Edit<tt class="backtick"></tt>Text, search forms, actions <span class="anchor" id="line-73"></span></li><li>config.page_footer2 <span class="anchor" id="line-74"></span></li></ul></li></ul></li><li><p class="line862">as a wiki user, you can override theme CSS settings by putting your own user CSS URL into <a href="./UserPreferences.html">UserPreferences</a> - this CSS is loaded after the theme CSS, so you can override all you want changed. Your CSS file must be in UTF-8 encoding (and as ASCII is a subset of that, it is ok, too). <span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span></li></ol><p class="line867"><tt class="backtick">page_header1</tt>, <tt class="backtick">page_header2</tt>, <tt class="backtick">page_footer1</tt> and <tt class="backtick">page_footer2</tt> can now be callables and will be called with the "request" object as a single argument (note that you should accept any keyword arguments in order to be compatible to future changes). <span class="anchor" id="line-77"></span><span class="anchor" id="bottom"></span></div>
</div>
<hr>
2007-07-30 15:45
</body>
</html>
