<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>HelpMiscellaneous</title>
<link rel="stylesheet" type="text/css" media="all" charset="utf-8" href="mentalwealth/css/common.css">
<link rel="stylesheet" type="text/css" media="screen" charset="utf-8" href="mentalwealth/css/screen.css">
<link rel="stylesheet" type="text/css" media="print" charset="utf-8" href="mentalwealth/css/print.css">
</head>
<body>
<table>
<tr>
<td>
<img src="logo.png">
</td>
<td>
&nbsp;[<a href="FrontPage.html">FrontPage</a>]&nbsp;[<a href="TitleIndex.html">TitleIndex</a>]&nbsp;[<a href="WordIndex.html">WordIndex</a>]
</td>
</tr>
</table>
<hr>
<div id="page">
<h1 id="title">HelpMiscellaneous</h1>
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-6"></span><p class="line867">
<h2 id="head-777ae4d9b63d3db0ab8172b38b0c02ca5fb7bc7e">Other MoinMoin help topics</h2>
<span class="anchor" id="line-7"></span><span class="anchor" id="line-8"></span><p class="line867"><strong>Subtopics</strong> <span class="anchor" id="line-9"></span><ul><li><p class="line891"><a href="./HelpMiscellaneous(2f)FrequentlyAskedQuestions.html">/FrequentlyAskedQuestions</a> <span class="anchor" id="line-10"></span></li><li><p class="line891"><a href="./HelpMiscellaneous(2f)ExperimentalFeatures.html">/ExperimentalFeatures</a> <span class="anchor" id="line-11"></span><span class="anchor" id="line-12"></span></li></ul><p class="line867"><strong>Contents</strong> <div class="table-of-contents"><p class="table-of-contents-heading">Contents<ol><li><a href="#head-777ae4d9b63d3db0ab8172b38b0c02ca5fb7bc7e">Other MoinMoin help topics</a><ol><li><a href="#head-7296bec95155a71998afd739633b91f1d4e6584f">Lost password for a user</a></li><li><a href="#head-6963f1a0e99d3a6c5a06fd367ac97128a4c949f0">Adding an icon to your wiki setup</a></li><li><a href="#head-5410c4c177877521a944d4efb2942c78d8a27397">Apache tricks</a><ol><li><a href="#head-d80ec2ce40a9d3dc9d989b8a185781b58eecdc3d">Securing access to a wiki via Apache means</a></li><li><a href="#head-6025bada70c17d8de849108ddf868f61335dceba">Serving the wiki from a domain root</a></li><li><a href="#head-30fa9d2bb4292bf4021e5cd0dd6380c765f491f5">Redirect /mywiki/MyWiki to the user's language FrontPage</a></li></ol><li><a href="#head-23418783ddf64665153cc0c84ddc5c10b96d3f5f">Serving the wiki from wiki.domain.com and home page from www.domain.com</a></li><li><a href="#head-cf166eb29e714e9defcb93d26cdab8fd8921bfc9">Special features for wiki farms and intranets</a><ol><li><a href="#head-12ae578a505c9009d5fbfaca8696e6faff91bfb2">Centralized settings</a></li><li><a href="#head-5fd14bbcc61fa77418c152301e1bfd9056803cd3">Remapping URLs</a></li></ol><li><a href="#head-13ee9b0c2df4befc911253947f780bb01a4bfc38">TODO</a></li></ol></li></ol></div><p class="line874"> <span class="anchor" id="line-13"></span><span class="anchor" id="line-14"></span><p class="line867">
<h3 id="head-7296bec95155a71998afd739633b91f1d4e6584f">Lost password for a user</h3>
<span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><p class="line862">If you have mail configured for your moin (see <a href="./HelpOnConfiguration.html">HelpOnConfiguration</a>) then <span class="anchor" id="line-17"></span>users can have their password sent to the email address in their current <span class="anchor" id="line-18"></span>record.  If SMTP is not configured, then the "Mail me my password" button <span class="anchor" id="line-19"></span>is not shown on <a href="./UserPreferences.html">UserPreferences</a>, and subscribed pages cannot be sent to <span class="anchor" id="line-20"></span>users. <span class="anchor" id="line-21"></span><span class="anchor" id="line-22"></span><p class="line867">
<h3 id="head-6963f1a0e99d3a6c5a06fd367ac97128a4c949f0">Adding an icon to your wiki setup</h3>
<span class="anchor" id="line-23"></span><span class="anchor" id="line-24"></span><p class="line862">You maybe want to add some icon to your wiki site, commonly known as <tt class="backtick">favicon.ico</tt>. <span class="anchor" id="line-25"></span>To get those little icons besides bookmarks and with tabbed browsing, add this to your <tt class="backtick">wikiconfig.py</tt>: <span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><pre>html_head = '''
<span class="anchor" id="line-28"></span>&lt;link rel="shortcut icon" href="/wiki/favicon.ico"&gt;
<span class="anchor" id="line-29"></span>&lt;!-- ... more header stuff ... --&gt;
<span class="anchor" id="line-30"></span>'''
<span class="anchor" id="line-31"></span></pre><span class="anchor" id="line-32"></span><span class="anchor" id="line-33"></span><p class="line862">The image size <em>must</em> be 16x16 and simply putting it as <tt class="backtick">/favicon.ico</tt> (into your Document<tt class="backtick"></tt>Root) does <em>not</em> work with all browsers (e.g. does not work with Mozilla versions 1.0 - 1.3). <span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><p class="line867">
<h3 id="head-5410c4c177877521a944d4efb2942c78d8a27397">Apache tricks</h3>
<span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><p class="line867">
<h4 id="head-d80ec2ce40a9d3dc9d989b8a185781b58eecdc3d">Securing access to a wiki via Apache means</h4>
<span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><p class="line862">See <a class="interwiki" href="http://purl.net/wiki/moin/PasswordProtectedEditing" title="MoinMoin">PasswordProtectedEditing</a> <span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><p class="line867">
<h4 id="head-6025bada70c17d8de849108ddf868f61335dceba">Serving the wiki from a domain root</h4>
<span class="anchor" id="line-42"></span><p class="line867"><tt class="backtick">httpd.conf</tt> modification for <a href="./MoinMoin.html">MoinMoin</a> installation at "/": <span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span><pre># global section:
<span class="anchor" id="line-45"></span>LoadModule rewrite_module /usr/lib/apache/1.3/mod_rewrite.so
<span class="anchor" id="line-46"></span># virtualhost section:
<span class="anchor" id="line-47"></span>RewriteEngine on
<span class="anchor" id="line-48"></span>RewriteRule ^/wiki/       -                      [last]
<span class="anchor" id="line-49"></span>RewriteRule ^/robots.txt  -                      [last]
<span class="anchor" id="line-50"></span>RewriteRule ^/favicon.ico -                      [last]
<span class="anchor" id="line-51"></span>RewriteRule ^/?(.*) /file/path/to/moin.cgi/$1  [last,type=application/x-httpd-cgi]
<span class="anchor" id="line-52"></span></pre><span class="anchor" id="line-53"></span><p class="line862">This way you can use short and clean URLs like <a class="http" href="http://LinuxWiki.de/FrontPage">http://LinuxWiki.de/FrontPage</a>. <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><p class="line874">Note: <span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><ul><li>/pathto/cgi-bin/.. is absolute file path, not a URL path. <span class="anchor" id="line-58"></span></li><li><p class="line862">Make sure the <em>file path</em> to moin.cgi has ExecCGI privileges in your httpd.conf. <span class="anchor" id="line-59"></span></li><li><p class="line862">There is no need for a ScriptAlias to moin.cgi, but you still need the alias to <a href="./MoinMoin.html">MoinMoin</a>'s htdocs folder: <tt class="backtick">Alias&nbsp;/wiki/&nbsp;"/usr/share/moin/htdocs/"</tt> <span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span></li></ul><p class="line867">
<h4 id="head-30fa9d2bb4292bf4021e5cd0dd6380c765f491f5">Redirect /mywiki/MyWiki to the user's language FrontPage</h4>
<span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><p class="line862">Perhaps you want to use My<tt class="backtick"></tt>Wiki in your wiki to refer to your wiki. If a user clicks this link s/he should be transfered to the <a href="./FrontPage.html">FrontPage</a>, that is to the <a href="./FrontPage.html">FrontPage</a> of her/his language. <span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span><p class="line862">Add this to your <tt>httpd.conf</tt> <em>before</em> the <tt>ScriptAlias</tt>: <span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><pre>RedirectPermanent /mywiki/MyWiki    http://www.domain.org/mywiki?action=show
<span class="anchor" id="line-68"></span></pre><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><p class="line867">
<h3 id="head-23418783ddf64665153cc0c84ddc5c10b96d3f5f">Serving the wiki from wiki.domain.com and home page from www.domain.com</h3>
<span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><p class="line874">Here is a configuration for virtual hosting with special permissions on Gentoo Linux.  The following configuration is for Apache2 config files.  Just put it all in httpd.conf for Apache 1. <span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><p class="line874">Add this to /etc/apache2/conf/vhosts/vhosts.conf <span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span><p class="line867"><span class="anchor" id="line-77"></span><pre>NameVirtualHost *
<span class="anchor" id="line-78"></span>&lt;VirtualHost *&gt;
<span class="anchor" id="line-79"></span>   ServerName www.domain.org
<span class="anchor" id="line-80"></span>   ServerAlias domain.org
<span class="anchor" id="line-81"></span>   DocumentRoot /var/www/domain.org/htdocs
<span class="anchor" id="line-82"></span>&lt;/VirtualHost&gt;
<span class="anchor" id="line-83"></span> 
<span class="anchor" id="line-84"></span>&lt;VirtualHost *&gt;
<span class="anchor" id="line-85"></span>   ServerName wiki.domain.org
<span class="anchor" id="line-86"></span>   Alias /wiki/ "/usr/share/moin/htdocs/"
<span class="anchor" id="line-87"></span>   Alias /favicon.ico "/var/www/htdocs/favicon.ico"
<span class="anchor" id="line-88"></span>   ScriptAlias / "/usr/share/moin/mywiki/moin.cgi/"
<span class="anchor" id="line-89"></span>&lt;/VirtualHost&gt;
<span class="anchor" id="line-90"></span></pre><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><p class="line874">Add this to /etc/apache2/conf/commonapache2.conf <span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><p class="line867"><span class="anchor" id="line-95"></span><pre>&lt;Directory /usr/share/moin/htdocs/&gt;
<span class="anchor" id="line-96"></span>   Order deny,allow
<span class="anchor" id="line-97"></span>   Allow from all
<span class="anchor" id="line-98"></span>&lt;/Directory&gt;
<span class="anchor" id="line-99"></span>
<span class="anchor" id="line-100"></span>&lt;Directory /usr/share/moin/domain.org/&gt;
<span class="anchor" id="line-101"></span>   Order deny,allow
<span class="anchor" id="line-102"></span>   Allow from all
<span class="anchor" id="line-103"></span>&lt;/Directory&gt;
<span class="anchor" id="line-104"></span></pre><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><p class="line867">
<h3 id="head-cf166eb29e714e9defcb93d26cdab8fd8921bfc9">Special features for wiki farms and intranets</h3>
<span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><p class="line862">The following shows how certain features can help you to optimize your configuration when you run several wikis on one host, or when you use <a href="./MoinMoin.html">MoinMoin</a> in intranet environments. <span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><p class="line867">
<h4 id="head-12ae578a505c9009d5fbfaca8696e6faff91bfb2">Centralized settings</h4>
<span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><ul><li>farmconfig.py <span class="anchor" id="line-113"></span></li><li>shared intermap.txt <span class="anchor" id="line-114"></span></li><li>shared code base and icons <span class="anchor" id="line-115"></span><span class="anchor" id="line-116"></span></li></ul><p class="line867">
<h4 id="head-5fd14bbcc61fa77418c152301e1bfd9056803cd3">Remapping URLs</h4>
<span class="anchor" id="line-117"></span><p class="line862">The configuration variable "<tt class="backtick">url_mappings</tt>" can be used to remap URLs, for example to change certain URL prefixes to totally different ones. This is especially useful in intranets, when whole trees of documents hosted outside of the wiki move around. It does not apply to most intra-wiki links as those are relative and are not remapped. <span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span><p class="line862">"<tt class="backtick">url_mappings</tt>" is a lookup table in the form of a dict, the key is the prefix to be replaced, the value is the replacement. <span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><p class="line862">You could also use "<tt class="backtick">url_mappings</tt>" to include a dereferer-script for external links, like this: <span class="anchor" id="line-122"></span><pre>url_mappings = {
<span class="anchor" id="line-123"></span>    'http://my-wiki/': 'http://my-wiki/',
<span class="anchor" id="line-124"></span>    'http://': '/cgi-bin/derefer.cgi?url=http://'
<span class="anchor" id="line-125"></span>  }
<span class="anchor" id="line-126"></span></pre><span class="anchor" id="line-127"></span><p class="line874">The reason you might want to use this is to avoid google spamming in your wiki (although this is unlikely to be noticed and would only counter the link spamming if done large-scale) or to keep your wikipages secret. Note that your own wiki needs to be included explicitly because URLs that might be generated automatically (for example for email notifications) would otherwise be remapped to your referrer script as well. <span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><p class="line867"><strong>Please notice:</strong> If you want to <em>redirect</em> a single page to another, just type <tt class="backtick">#REDIRECT</tt> and the name of the page to direct to in the first line of your page. See <a href="./HelpOnProcessingInstructions.html">HelpOnProcessingInstructions</a>. <span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><p class="line867">
<h3 id="head-13ee9b0c2df4befc911253947f780bb01a4bfc38">TODO</h3>
<span class="anchor" id="line-132"></span><span class="anchor" id="line-133"></span><p class="line867"><img alt="&lt;!&gt;" height="15" src="./mentalwealth/img/attention.png" title="&lt;!&gt;" width="15" /> TODO: explain the following things in detail, and add more detail to the above sections <span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><p class="line874">Needing more explanation: <span class="anchor" id="line-136"></span><ul><li>event logging <span class="anchor" id="line-137"></span></li><li>Page trails (user option) <span class="anchor" id="line-138"></span></li><li><p class="line891"><a href="./UserPreferences.html">UserPreferences</a>: checkboxes for double-click edit, page trail, fancy links, emoticons, jump to last page visited, and some other yes/no options <span class="anchor" id="line-139"></span></li><li>"Remove trailing whitespace from each line" option in the editor <span class="anchor" id="line-140"></span></li><li>Page templates (create a new page using a template page)  <span class="anchor" id="line-141"></span></li><li><p class="line862">Only "normal" URLs (outside of brackets) are converted to inline images ==&gt; document exact rules <span class="anchor" id="line-142"></span></li><li>Highlighting of search results, and of bad words when spellchecking <span class="anchor" id="line-143"></span></li><li>Support for "file:" URLS <span class="anchor" id="line-144"></span></li><li>email notification features <span class="anchor" id="line-145"></span></li><li><p class="line862">"RSS" icon displayed by <a href="./RecentChanges.html">RecentChanges</a> macro <span class="anchor" id="line-146"></span></li><li>commentary field of editor, recent changes and page info <span class="anchor" id="line-147"></span></li><li><p class="line862">Page caching, for now limited to XSLT processing (where it's absolutely needed); new code &amp; API to add the "Delete<tt class="backtick"></tt>Cache" link <span class="anchor" id="line-148"></span></li><li>inline search fields (at the bottom of each page) <span class="anchor" id="line-149"></span></li><li>the interwiki name "Self" now always points to the own wiki <span class="anchor" id="line-150"></span></li><li>page info action <span class="anchor" id="line-151"></span><span class="anchor" id="line-152"></span></li></ul><p class="line874">Admin stuff: <span class="anchor" id="line-153"></span><ul><li>describe "moin.cgi?action=test" tool in more detail <span class="anchor" id="line-154"></span></li><li><p class="line862">Wiki<tt class="backtick"></tt>Farm support: <span class="anchor" id="line-155"></span><ul><li><p class="line891">&lt;datadir&gt;/plugin/macro and &lt;datadir&gt;/plugin/action can be used to store macros and actions local to a specific wiki instance <span class="anchor" id="line-156"></span></li><li>config.shared_intermap can contain a pathname to a shared "intermap.txt" file (i.e. one stored outside the datadir) <span class="anchor" id="line-157"></span></li></ul></li><li>$PAGE placeholder in interwiki map <span class="anchor" id="line-158"></span><span class="anchor" id="line-159"></span></li></ul><p class="line874">Command-line tools: <span class="anchor" id="line-160"></span><ul><li>"moin-dump" command line tool to create a static copy of the wiki content <span class="anchor" id="line-161"></span></li><li>"pagescleaner" display unused directories in data/pages <span class="anchor" id="line-162"></span></li><li>"globaledit" script for doing global changes to all pages in a wiki. <span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span></li></ul><p class="line874">Compatibility: <span class="anchor" id="line-165"></span><ul><li>RSS features require a recent PyXML (CVS or 0.7) due to bugs in the namespace handling of xml.sax.saxutils in earlier versions. This is (hopefully) automatically detected on every installation. <span class="anchor" id="line-166"></span></li></ul><span class="anchor" id="bottom"></span></div>
</div>
<hr>
2007-07-30 15:45
</body>
</html>
